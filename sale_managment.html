<!DOCTYPE html>
<html lang="en">
<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>D-pot</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- owl stylesheets -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">

</head>
<body>
    <!-- section banner start -->
    <div class="header-main">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4">
                    <div><a href="index.html"><img src="images/logo.png"></a></div>
                </div>
                <div class="col-md-8">
                    <div class="menu_text">
                        <ul>
                            <li class="last"><button onclick="clearData()">Clear Data</button></li>
                            <li class="active">
                                <div id="myNav" class="overlay">
                                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                                    <div class="overlay-content">
                                        <a href="index.html">Home</a>
                                        <a href="shop.html">Shop</a>
                                        <a href="cart.html">Cart</a>
                                        <a href="handle_stock.html">Handle Stock</a>
                                        <a href="sale_managment.html">Sale Managment</a>
                                    </div>
                                </div>
                                <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; Menu</span>
                    </div>
                    </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- section about start -->
    <div class="about_section">
        <div class="about_text">
            <div class="container">
                <h1 class="about_taital_1"><strong><span style="color: #f7941d;">Sale</span> Managment</strong></h1>
            </div>

            <div class="container">
                <form action="/action_page.php" id="saleManagmentForm">
                    <div class="form-group">
                        <br /><br /><br /><br /><br />
                    </div>
                    <div class="form-group" style="border: 1px solid #000;">
                        <label style="font-size: 22px; font-weight:600">When an item has the following quantity in stock:</label>
                        <input type="text" class="email-bt" placeholder="Quantity" id="Quantity" style="width:15%; height:10px" onkeypress="return onlyNumberKey(event)">
                        <label style="font-size: 22px; font-weight:600">The following percentage will be reduced from price:</label>
                        <input type="text" class="email-bt" placeholder="Percentage" id="PercentageQuantity" style="width:15%; height:10px" onkeypress="return onlyNumberKey(event)">
                    </div>
                    <div class="form-group" style="border: 1px solid #000;">
                        <label style="font-size: 22px; font-weight:600">When the following number of days have passed since the item has entered the stock: </label>
                        <input type="text" class="email-bt" placeholder="Days" id="Days" style="width:15%; height:10px" onkeypress="return onlyNumberKey(event)">
                        <label style="font-size: 22px; font-weight:600">The following percentage will be reduced from price:</label>
                        <input type="text" class="email-bt" placeholder="Percentage" id="PercentageDays" style="width:15%; height:10px" onkeypress="return onlyNumberKey(event)">
                    </div>
                    <div class="form-group">
                        <label style="font-size: 22px; font-weight:600; color:red">*If the item is applicable to both sales, lowest price between both will be chosen.</label>
                    </div>
                </form>
            </div>
            <div class="send_btn">
                <button type="button" class="main_bt" onclick="applySale()"><a href="#">Apply Sale</a></button>
            </div>
            <div class="form-group">
                <br /><br />
            </div>
        </div>
    </div>
    <!-- section about end -->
    <!-- Javascript files-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/plugin.js"></script>
    <!-- sidebar -->
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/custom.js"></script>
    <!-- javascript -->
    <script src="js/owl.carousel.js"></script>
    <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".fancybox").fancybox({
                openEffect: "none",
                closeEffect: "none"
            });

            $(".zoom").hover(function () {

                $(this).addClass('transition');
            }, function () {

                $(this).removeClass('transition');
            });
        });
    </script>


    <script>
        function openNav() {
            document.getElementById("myNav").style.width = "100%";
        }

        function closeNav() {
            document.getElementById("myNav").style.width = "0%";
        }

        function clearData() {
            localStorage.clear();
            initialize();
        }

        function initialize()
        {
            let saleByQuantity = JSON.parse(localStorage.getItem("SaleByQuantity"));
            let saleByDays = JSON.parse(localStorage.getItem("SaleByDays"));

            // Check if a sale exists and if so place the information in the input feilds
            if (saleByQuantity)
            {
                document.getElementById("Quantity").value = saleByQuantity.quantity;
                document.getElementById("PercentageQuantity").value = saleByQuantity.percentage;
            }

            if (saleByDays)
            {
                document.getElementById("Days").value = saleByDays.days;
                document.getElementById("PercentageDays").value = saleByDays.percentage;
            }
        }

        function applySale()
        {
            // Recieve values from input feilds
            let quantity = document.getElementById("Quantity").value;
            let percentageQuantity = document.getElementById("PercentageQuantity").value;
            let days = document.getElementById("Days").value;
            let percentageDays = document.getElementById("PercentageDays").value;

            // Check that the fields are filled in right
            if ((quantity && !percentageQuantity) || (!quantity && percentageQuantity) || (days && !percentageDays) || (!days && percentageDays))
            {
                alert("For each sale either all fields must be entered or left empty");
                return;
            }

            // allow max sale do be 99%
            if (percentageDays > 99 || percentageQuantity > 99)
            {
                alert("Max percantage is 99");
                return;
            }

            // Check if the sale exists and if so save in localStorage
            if (quantity)
            {
                localStorage.setItem("SaleByQuantity", JSON.stringify({ quantity: quantity, percentage: percentageQuantity }));
            }

            if (days)
            {
                localStorage.setItem("SaleByDays", JSON.stringify({ days: days, percentage: percentageDays }));
            }
        }

        function onlyNumberKey(evt) {
            // Only ASCII charactar in that range allowed
            var ASCIICode = (evt.which) ? evt.which : evt.keyCode

            if (ASCIICode > 31 && (ASCIICode < 48 || ASCIICode > 57)) {
                return false;
            }

            return true;
        }

        initialize();
    </script>
</body>
</html>